# graph

Приложение `graph` описывает образовательный граф: предметы, концепции/темы, вершины (навыки/знания) и связи между ними.

Цели:
- дать "каркас" для адаптивного обучения (цифровой двойник, образовательный граф);
- связывать задания (`tasks.Task`) с вершинами графа (`graph.Node`), чтобы результаты решения влияли на метрики.

Архитектура:
- `domain/` — enum'ы для типов нод/связей
- `application/` — use cases (позже)
- `infrastructure/` — Django ORM модели

## Модели

### Subject
Справочник предметов (например: Математика, Физика).

Пример:
- `Subject(title="Математика")`

### Concept
Тема/концепция внутри предмета (например: "Квадратные уравнения").

Зачем:
- группировать вершины графа и задания на уровне "тем";
- помогать фронтенду в навигации и фильтрации.

Поля:
- `title`
- `subject` (nullable сейчас) — предмет
- `description`

Пример:
- `Concept(title="Квадратные уравнения", subject=Математика)`

### Node
Вершина графа: конкретное знание/навык/понятие, которое можно измерять и развивать.

Зачем:
- на нее будут "ложиться" метрики ученика (умение/знание);
- задания (`tasks.Task`) ссылаются на ноды, чтобы результаты решения обновляли граф.

Поля:
- `title`
- `type` — тип вершины (enum: concept/skill/law/case/...)
- `subject`
- `concept` (nullable) — к какой концепции относится

Пример:
- `Node(title="Теорема Виета", type="concept", subject=Математика, concept=Квадратные уравнения)`

### Relation
Ребро графа: связь между двумя вершинами.

Зачем:
- описывать зависимости (пререквизиты), вложенность и другие отношения.

Поля:
- `parent` / `child` — связанные ноды
- `type` — тип связи (enum: prerequisite/part_of/depends_on/...)

Пример:
- `Relation(parent="Квадратные уравнения", child="Теорема Виета", type="prerequisite")`

## Связь с заданиями

В `tasks` есть связующая модель `TaskNode`, которая связывает:
- `tasks.Task` ↔ `graph.Node`

Это позволяет:
- хранить "какие навыки/знания проверяет задача";
- на основании `training.TaskAttempt` пересчитывать метрики по `graph.Node`.

## API

### GET /api/graph/subjects/
Возвращает список предметов.

Пример ответа:
```
{
  "subjects": [
    { "id": 1, "title": "Математика" },
    { "id": 2, "title": "Физика" }
  ]
}
```
