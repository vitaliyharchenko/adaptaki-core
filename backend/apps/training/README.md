# training

Приложение `training` отвечает за тестирование/тренажер:
- хранение заранее подготовленных тестов (цепочек заданий);
- хранение попыток прохождения тестов;
- хранение фактов решения заданий (попыток заданий).

Важно:
- `TaskAttempt` — атомарная сущность: один факт "пользователь отправил ответ на задание".
- `TestAttempt` — контейнер/сессия, объединяющий множество `TaskAttempt` в рамках одного теста.

## Модели

### Test
Заранее подготовленный тест (последовательность заданий).

Поля:
- `title` — название/описание
- `subject` — предмет (FK на `graph.Subject`)
- `mode` — режим (simple/exam)

Пример:
- `Test(title="Тренировка: квадратные уравнения", subject=Математика, mode="simple")`

### TestItem
Элемент теста: конкретное задание + его позиция и максимальный балл в рамках теста.

Зачем:
- задает порядок выдачи заданий;
- позволяет переиспользовать одно `Task` в разных тестах;
- позволяет задавать `max_score` в контексте теста.

Поля:
- `test` — FK на `Test`
- `task` — FK на `tasks.Task`
- `order` — порядок (1..N)
- `max_score` — максимальный балл за это задание в данном тесте

Пример:
- `TestItem(test=Тест, task=Задание#123, order=1, max_score=1)`

### TestAttempt
Попытка прохождения теста (контейнер).

Зачем:
- фиксировать старт/финиш теста, статус и итоговый балл;
- объединять ответы (`TaskAttempt`) в рамках одного прохождения.

Поля:
- `user` — кто проходит
- `test` — какой тест
- `status` — started/finished/abandoned
- `started_at` / `finished_at`
- `total_score` / `max_score` — итоговые значения (снапшот на момент завершения)

Пример:
- ученик начал тест → создается `TestAttempt(status="started")`
- завершил → выставляем `finished_at`, `status="finished"`, считаем totals

### TaskAttempt
Попытка решения задания (атомарный факт решения).

Зачем:
- хранить историю ответов ученика для образовательного графа;
- использовать как внутри тестов, так и в режиме свободной тренировки.

Поля:
- `user`, `task`
- `test_attempt` (nullable) — если решали в рамках теста
- `answer_payload` — JSON с ответом пользователя
- `score`, `is_correct`
- `submitted_at`, `duration_ms`
- `applied_scoring_policy`, `applied_max_score` — снапшот политики (важно для воспроизводимости)

Пример:
- пользователь отправил ответ на `Task` типа short_text:
  - `answer_payload={ "value": "масса" }`
  - проверка записала `score=1`, `is_correct=True`

